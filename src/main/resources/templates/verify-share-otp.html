<!-- verify-share-otp.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ğŸ” Verify OTP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="d-flex justify-content-center align-items-center vh-100 bg-light">
<div class="card p-4 shadow text-center" style="min-width: 400px;">

    <!-- âœ… If already downloaded -->
    <div th:if="${alreadyDownloaded}">
        <p class="text-success mt-3"> <h1>âœ… This file has already been downloaded using your OTP.</p></h1>
    </div>

    <!-- âœ… If not downloaded yet -->
    <div th:unless="${alreadyDownloaded}">
        <!-- OTP Form -->
        <form th:action="@{/verify-file-otp}" method="post">
            <input type="hidden" name="fileId" th:value="${fileId}" />
            <div class="form-group mt-3">
                <input type="text" class="form-control" name="otp" placeholder="Enter the OTP" required />
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Verify OTP</button>
            </div>
        </form>

        <!-- âœ… Success Message -->
        <p th:if="${message}" th:text="${message}" class="text-success mt-3"></p>

        <!-- âœ… Error Message -->
        <p th:if="${error}" th:text="${error}" class="text-danger mt-3"></p>

        <!-- âœ… Resend OTP Form -->
        <p class="mt-4 mb-0">Didnâ€™t get the OTP or it expired?</p>
        <form th:action="@{/resend-otp}" method="post" class="mt-2">
            <input type="hidden" name="fileId" th:value="${fileId}" />
            <input type="hidden" name="fileName" th:value="${fileName}" />
            <input type="hidden" name="recipientEmail" th:value="${email}" />
            <button type="submit" class="btn btn-link">ğŸ” Resend OTP</button>
        </form>
    </div>
</div>
</body>
</html>
